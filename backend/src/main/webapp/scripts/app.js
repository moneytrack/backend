!function e(t,a,r){function n(o,i){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){var a=t[o][1][e];return n(a?a:e)},u,u.exports,e,t,a,r)}return a[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/CategoryPicker.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"CategoryPicker",propTypes:{rootCategoryId:s["default"].PropTypes.number,categoryList:s["default"].PropTypes.arrayOf(s["default"].PropTypes.object),allowEmpty:s["default"].PropTypes.bool,value:s["default"].PropTypes.number},onChange:function(e){this.props.onChange(e)},renderRecurse:function(e,t){var a=this,r=e.slice().sort(function(e,t){return e.order-t.order});return r.map(function(e){var r=e.childIdList.map(function(e){return a.props.categoryList.filter(function(t){return t.id===e})[0]}),n=["category-picker__category"];if(a.props.value===e.id&&n.push("category-picker__category--selected"),n=n.join(" "),r.length>0){var o=r.length>0?a.renderRecurse(r,t+1):"";return[s["default"].createElement("div",{key:e.id,className:n,onClick:function(){return a.onChange(e.id)}},s["default"].createElement("div",{className:"category-picker__category__title"},e.title)),s["default"].createElement("div",{key:e.id+"-children",className:"category-picker__children"},o)]}return[s["default"].createElement("div",{key:e.id,className:n,onClick:function(){return a.onChange(e.id)}},s["default"].createElement("div",{className:"category-picker__category__title"},e.title))]})},render:function(){var e=this,t=this.props.categoryList.filter(function(t){return t.parentId===e.props.rootCategoryId}),a=this.renderRecurse(t,0);if(this.props.allowEmpty){var r=["category-picker__category"];null===this.props.value&&r.push("category-picker__category--selected"),r=r.join(" "),a.unshift(s["default"].createElement("div",{key:"empty",className:r,onClick:function(){return e.onChange(null)}},s["default"].createElement("div",{className:"category-picker__empty"},"Do not filter by category")))}return s["default"].createElement("div",{className:"category-picker"},a)}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ConfirmDialog.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("./ModalContainer"),i=r(o),l=s["default"].createClass({displayName:"ConfirmDialog",render:function(){return s["default"].createElement(i["default"],{visible:this.props.visible},s["default"].createElement("div",{className:"confirm-dialog"},s["default"].createElement("div",{className:"confirm-dialog__msg"},"Are you sure?"),s["default"].createElement("div",{className:"confirm-dialog__controls"},s["default"].createElement("button",{type:"button",onClick:this.props.onYes},"Yes"),s["default"].createElement("button",{type:"button",onClick:this.props.onNo},"No"))))}});a["default"]=l},{"./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx",react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/DateTimePicker.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=r(o),l=e("input-moment"),c=r(l),u=e("moment"),d=r(u),f=e("./ModalContainer"),m=r(f),p=e("./DropDownContainer"),h=(r(p),s["default"].createClass({displayName:"DateTimePicker",getInitialState:function(){return{visible:!1}},onCancel:function(){this.setState((0,i["default"])(this.state,{visible:{$set:!1}}))},onClick:function(){this.setState((0,i["default"])(this.state,{visible:{$set:!this.state.visible}}));var e=(0,d["default"])(this.props.value.timestamp);this.props.onChange((0,i["default"])(this.props.value,{moment:{$set:e}}))},onChangeDate:function(e){this.props.onChange((0,i["default"])(this.props.value,{moment:{$set:e}}))},onSaveDate:function(){var e=this.props.value.moment.valueOf();this.props.onChange((0,i["default"])(this.props.value,{timestamp:{$set:e}})),this.setState((0,i["default"])(this.state,{visible:{$set:!1}}))},render:function(){var e=this.props.value,t=e.timestamp,a=e.moment;return s["default"].createElement("div",null,s["default"].createElement("input",{onClick:this.onClick,value:(0,d["default"])(t).format("MM.DD HH:mm:ss"),readOnly:!0}),this.state.visible?s["default"].createElement(m["default"],{onCancel:this.onCancel},s["default"].createElement(c["default"],{moment:a,onChange:this.onChangeDate,onSave:this.onSaveDate})):s["default"].createElement("span",null))}}));h.contextTypes={store:s["default"].PropTypes.object},h.wrapState=function(e){return{timestamp:e,moment:(0,d["default"])(e)}},h.unwrapState=function(e){return e.timestamp},a["default"]=h},{"./DropDownContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/DropDownContainer.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/DropDownContainer.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"DropDownContainer",render:function(){return this.props.visible!==!1?s["default"].createElement("div",{className:"drop-down-container"},s["default"].createElement("div",{className:"drop-down-container__bg"}),s["default"].createElement("div",{className:"drop-down-container__body"},this.props.children)):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditCategoryList.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-dom"),i=(r(o),e("react-addons-update")),l=r(i),c=e("./arrays"),u=e("./ModalContainer"),d=r(u),f=(s["default"].createClass({displayName:"RenameModal",render:function(){return s["default"].createElement(d["default"],{visible:this.props.editing,onCancel:this.props.onEditCanceled,onSave:this.props.onEditFinished},s["default"].createElement("label",null,"New name: ",s["default"].createElement("input",{value:this.props.editingText,onChange:this.onEdit,ref:"title_edit_input"})),s["default"].createElement("button",{onClick:this.onEditFinished},"Save"))}}),s["default"].createClass({displayName:"EditCategoryList",getInitialState:function(){return{mode:null,renamingId:null,renamingText:null,newCategoryTitle:null,newCategoryParentId:null}},onRenameBegin:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"RENAME"},renamingId:{$set:e.id},renamingText:{$set:e.title}}))},onRenameFinished:function(e){""!==this.state.renamingText&&(this.props.onRenameCategory(this.state.renamingId,this.state.renamingText),this.setState((0,l["default"])(this.state,{mode:{$set:null}})))},onRenameCanceled:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:null}}))},onRename:function(e){this.setState((0,l["default"])(this.state,{renamingText:{$set:e.target.value}}))},onMove:function(e,t){var a=parseInt(t.target.value);e>=0&&this.props.onMoveCategory(e,a)},onNewCategoryBegin:function(e){this.setState((0,l["default"])(this.state,{mode:{$set:"NEW_CATEGORY"},newCategoryTitle:{$set:""},newCategoryParentId:{$set:e}}))},onNewCategoryCanceled:function(){this.setState((0,l["default"])(this.state,{mode:{$set:""}}))},onNewCategoryTitleChange:function(e){this.setState((0,l["default"])(this.state,{newCategoryTitle:{$set:e.target.value}}))},onNewCategoryFinished:function(){""!==this.state.newCategoryTitle&&(this.props.onNewCategory(this.state.newCategoryTitle,this.state.newCategoryParentId),this.setState((0,l["default"])(this.state,{mode:{$set:""}})))},onDeleteCategory:function(e,t){e.preventDefault(),this.props.onDeleteCategory(t)},renderRecurse:function(e,t){function a(e,t){var r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(e.id==t)return[];for(var n="",i=0;r>i;++i)n+=String.fromCharCode(parseInt("00A0",16)),n+=String.fromCharCode(parseInt("00A0",16));var l=[s["default"].createElement("option",{value:e.id,key:e.id},n+e.title)];return e.childIdList.map(function(e){var n=(0,c.find)(o,function(t){return t.id===e});return a(n,t,r+1)}).forEach(function(e){return e.forEach(function(e){l.push(e)})}),l}var r=this,n=this.context.store.getState(),o=n.categoryList,i=n.rootCategoryId,l=o.filter(function(e){return e.id===i})[0],u=e.slice().sort(function(e,t){return e.order-t.order});return u.map(function(e){var n=e.childIdList.map(function(e){return o.filter(function(t){return t.id===e})[0]}),i=["edit-category-list__category"];if(i=i.join(" "),n.length>0){var c=n.length>0?r.renderRecurse(n,t+1):"";return[s["default"].createElement("div",{key:e.id,className:i},s["default"].createElement("div",{className:"edit-category-list__category__content"},s["default"].createElement("div",{className:"edit-category-list__category__title",onClick:function(){return r.onRenameTitleBegin(e)}},e.title)," ",s["default"].createElement("div",{className:"edit-category-list__category__controls"},s["default"].createElement("a",{href:"#",onClick:function(t){return r.onRenameBegin(e)},className:"pseudo"},"Rename"),s["default"].createElement("a",{href:"#",onClick:function(t){return r.onNewCategoryBegin(e.id)},className:"pseudo"},"Add sub-category..."),s["default"].createElement("select",{onChange:function(t){return r.onMove(e.id,t)}},s["default"].createElement("option",{value:-1},"Move to..."),a(l,e.id)),s["default"].createElement("a",{href:"#",onClick:function(t){return r.onDeleteCategory(t,e.id)},className:"pseudo  warning"},"Delete")))),s["default"].createElement("div",{key:e.id+"-children",className:"edit-category-list__children"},c)]}return[s["default"].createElement("div",{key:e.id,className:i},s["default"].createElement("div",{className:"edit-category-list__category__content"},s["default"].createElement("div",{className:"edit-category-list__category__title",onClick:function(){return r.onRenameBegin(e)}},e.title),s["default"].createElement("div",{className:"edit-category-list__category__controls"},s["default"].createElement("a",{href:"#",onClick:function(t){return r.onRenameBegin(e)},className:"pseudo"},"Rename"),s["default"].createElement("a",{href:"#",onClick:function(t){return r.onNewCategoryBegin(e.id)},className:"pseudo"},"Add sub-category..."),s["default"].createElement("select",{onChange:function(t){return r.onMove(e.id,t)}},s["default"].createElement("option",{value:-1},"Move to..."),a(l,e.id)),s["default"].createElement("a",{href:"#",onClick:function(t){return r.onDeleteCategory(t,e.id)},className:"pseudo warning"},"Delete"))))]})},render:function(){var e=this,t=this.context.store.getState(),a=t.rootCategoryId,r=t.categoryList,n=r.filter(function(e){return e.parentId===a}),o=this.renderRecurse(n,0);if(this.props.allowEmpty){var i=["edit-category-list__category"];null===this.props.value&&i.push("edit-category-list__category--selected"),i=i.join(" "),o.unshift(s["default"].createElement("div",{key:"empty",className:i},s["default"].createElement("div",{className:"edit-category-list__empty"},"Do not filter by category")))}var l=function(e){e&&e.focus()};return s["default"].createElement("div",{className:"edit-category-list"},s["default"].createElement(d["default"],{visible:"RENAME"===this.state.mode,onCancel:this.onRenameCanceled,onSave:this.onRenameFinished},s["default"].createElement("label",null,"New title: ",s["default"].createElement("input",{value:this.state.renamingText,onChange:this.onRename,ref:l})),s["default"].createElement("button",{onClick:this.onRenameFinished,disabled:""===this.state.renamingText},"Save"),s["default"].createElement("button",{onClick:this.onRenameCanceled},"Cancel")),s["default"].createElement(d["default"],{visible:"NEW_CATEGORY"===this.state.mode,onCancel:this.onNewCategoryCanceled,onSave:this.onNewCategoryFinished},s["default"].createElement("label",null,"New category title: ",s["default"].createElement("input",{value:this.state.newCategoryTitle,onChange:this.onNewCategoryTitleChange,ref:l})),s["default"].createElement("button",{onClick:this.onNewCategoryFinished,disabled:""===this.state.newCategoryTitle},"Save"),s["default"].createElement("button",{onClick:this.onNewCategoryCanceled},"Cancel")),o,s["default"].createElement("div",{className:"edit-category-list__new-root-category"},s["default"].createElement("a",{href:"#",className:"pseudo edit-category-list__new-root-category__link",onClick:function(t){return e.onNewCategoryBegin(a)}},"Add new root category...")))}}));f.contextTypes={store:s["default"].PropTypes.object},a["default"]=f},{"./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/arrays.js",react:"react","react-addons-update":"react-addons-update","react-dom":"react-dom"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditExpense.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=r(o),l=e("./NumberInput.jsx"),c=r(l),u=e("./CategoryPicker.jsx"),d=r(u),f=e("./DateTimePicker.jsx"),m=r(f),p=e("moment"),h=r(p),y=s["default"].createClass({displayName:"EditExpense",getInitialState:function(){var e=this,t=this.context.store.getState(),a=t.rootCategoryId,r=t.categoryList,n=t.history;if(this.props.expenseId){var s=n.filter(function(t){return t.id===e.props.expenseId})[0];return{id:s.id,amount:c["default"].wrapState(s.amount/100),categoryId:s.categoryId,date:m["default"].wrapState(s.date),comment:s.comment,mode:"EDIT"}}var o=r.filter(function(e){return e.parentId===a}),i=o.length>0?o[0].id:-1;return{amount:c["default"].wrapState(0),categoryId:i,date:m["default"].wrapState((0,h["default"])().valueOf()),comment:"",mode:"NEW"}},onSubmit:function(e){if(e.preventDefault(),"NEW"===this.state.mode)this.props.onAdd({amount:Math.floor(100*c["default"].unwrapState(this.state.amount)),categoryId:this.state.categoryId,comment:this.state.comment,date:m["default"].unwrapState(this.state.date)}),this.setState(this.getInitialState());else{if("EDIT"!==this.state.mode)throw new Error("Illegal mode: "+this.state.mode);this.props.onSave({id:this.state.id,amount:Math.floor(100*c["default"].unwrapState(this.state.amount)),categoryId:this.state.categoryId,comment:this.state.comment,date:m["default"].unwrapState(this.state.date)})}},onAmountChange:function(e){this.setState((0,i["default"])(this.state,{amount:{$set:e}}))},onChangeComment:function(e){this.setState((0,i["default"])(this.state,{comment:{$set:e.target.value}}))},onChangeDate:function(e){this.setState((0,i["default"])(this.state,{date:{$set:e}}))},onChangeCategory:function(e){this.setState((0,i["default"])(this.state,{categoryId:{$set:e}}))},onNewCategory:function(e,t){this.props.onAddCategory({title:e,parentId:t})},onCancel:function(){this.props.onCancel()},render:function(){return s["default"].createElement("form",{onSubmit:this.onSubmit,className:"edit-expense"},s["default"].createElement("table",null,s["default"].createElement("tbody",null,s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Amount: "),s["default"].createElement("td",null,s["default"].createElement(c["default"],{value:this.state.amount,onChange:this.onAmountChange}))),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Category: "),s["default"].createElement("td",null,s["default"].createElement("div",{className:"edit-expense__category-picker-wrapper"},s["default"].createElement(d["default"],{categoryList:this.context.store.getState().categoryList,rootCategoryId:this.context.store.getState().rootCategoryId,value:this.state.categoryId,onChange:this.onChangeCategory,editingEnabled:!0,onNewCategory:this.onNewCategory})))),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Date:"),s["default"].createElement("td",null,s["default"].createElement(m["default"],{value:this.state.date,onChange:this.onChangeDate}))),s["default"].createElement("tr",null,s["default"].createElement("td",{className:"edit-expense__field__label"},"Comment:"),s["default"].createElement("td",null,s["default"].createElement("input",{value:this.state.comment,onChange:this.onChangeComment}))),s["default"].createElement("tr",null,s["default"].createElement("td",null,"NEW"===this.state.mode?s["default"].createElement("button",{type:"submit"},"Add"):s["default"].createElement("button",{type:"submit"},"Save"),"EDIT"===this.state.mode?s["default"].createElement("button",{type:"button",onClick:this.onCancel},"Cancel"):null),s["default"].createElement("td",null)))))}});y.contextTypes={store:s["default"].PropTypes.object},a["default"]=y},{"./CategoryPicker.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/CategoryPicker.jsx","./DateTimePicker.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/DateTimePicker.jsx","./NumberInput.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/NumberInput.jsx",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ExpenseList.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=(r(o),e("input-moment")),l=(r(i),e("moment")),c=r(l),u=e("./money"),d=r(u),f=e("./ModalContainer"),m=(r(f),e("./EditExpense")),p=(r(m),e("./action-creators"),e("./ConfirmDialog")),h=(r(p),s["default"].createClass({displayName:"ExpenseList",render:function(){function e(e,t){for(var a=[],r=null,n=null,s=0;s<e.length;++s){var o=e[s],i=t(o);(null===r||t(o)!==n)&&(r=[],a.push(r)),r.push(o),n=i}return a}function t(e){var a=o.filter(function(t){return t.id===e.parentId})[0];return null!==a.parentId?t(a).concat(e):[e]}var a=this,r=this.props.data,n=this.context.store.getState(),o=n.categoryList,i=n.userSettings,l=i.currency,u=d["default"].format(d["default"].settings.byCurrency[l]),f=r.sort(function(e,t){return t.date-e.date}),m=e(f,function(e){return(0,c["default"])(e.date).format("YYYY MM DD")});return s["default"].createElement("div",{className:"expense-list"},m.map(function(e){var r=(0,c["default"])(e[0].date).format("MMMM Do YYYY (dddd)");return s["default"].createElement("div",{key:r,className:"expense-list__group"},s["default"].createElement("div",{className:"expense-list__group__title"},r),e.map(function(e){var r,n,i=o.filter(function(t){return t.id===e.categoryId})[0];return e.comment?(r=e.comment,n=t(i).map(function(e){return e.title}).join(" / ")):(r=t(i).map(function(e){return e.title}).join(" / "),n=""),s["default"].createElement("div",{key:e.id,className:"expense-list__expense"},s["default"].createElement("div",{className:"expense-list__expense__time"},(0,c["default"])(e.date).format("HH:mm")),s["default"].createElement("div",null,s["default"].createElement("div",{className:"expense-list__expense__first-line"},s["default"].createElement("div",{className:"expense-list__expense__amount"},u(e.amount)),s["default"].createElement("div",{className:"expense-list__expense__desc1"}," "," — ",r)),s["default"].createElement("div",{className:"expense-list__expense__desc2"},n)),s["default"].createElement("div",{className:"expense-list__expense__controls"},s["default"].createElement("a",{href:"#",className:"pseudo warning",onClick:function(t){t.preventDefault(),a.props.onDelete(e.id)}},"Delete"),s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(t){t.preventDefault(),a.props.onEdit(e.id)}},"Edit")))}))}))}}));h.contextTypes={store:s["default"].PropTypes.object},a["default"]=h},{"./ConfirmDialog":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ConfirmDialog.jsx","./EditExpense":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditExpense.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx","./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js","./money":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/money.js","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/History.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=r(o),l=e("input-moment"),c=(r(l),e("moment")),u=r(c),d=e("./ModalContainer"),f=r(d),m=e("./EditExpense"),p=r(m),h=e("./action-creators"),y=e("./ConfirmDialog"),v=(r(y),e("./ExpenseList")),g=r(v),_=e("./CategoryPicker"),E=r(_),C=e("./arrays"),x=Object,b=x.keys,k=s["default"].createClass({displayName:"History",getInitialState:function(){var e=(0,u["default"])();e.startOf("month");var t=e.valueOf();e.endOf("month");var a=e.valueOf();return{editingExpense:!1,deletingExpense:!1,filterDateFrom:t,filterDateTo:a,filterDateItem:e.year()+"-"+e.month(),filterCategory:null,filterComment:""}},onExpenseDelete:function(e){this.props.onDelete(e)},onExpenseEdit:function(e){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!0},editingExpenseId:{$set:e}}))},onCancelEditingExpense:function(){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onExpenseSave:function(e){this.context.store.dispatch((0,h.editExpense)(e)),this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onExpenseEditCancel:function(){this.setState((0,i["default"])(this.state,{editingExpense:{$set:!1}}))},onFilterByYearMonth:function(e,t){var a=(0,u["default"])().year(e).month(t);a.startOf("month");var r=a.valueOf();a.endOf("month");var n=a.valueOf();this.setState((0,i["default"])(this.state,{filterDateFrom:{$set:r},filterDateTo:{$set:n},filterDateItem:{$set:e+"-"+t}}))},onFilterByYear:function(e){var t=(0,u["default"])().year(e);t.startOf("year");var a=t.valueOf();t.endOf("year");var r=t.valueOf();this.setState((0,i["default"])(this.state,{filterDateFrom:{$set:a},filterDateTo:{$set:r},filterDateItem:{$set:e}}))},onFilterByCategory:function(e){this.setState((0,i["default"])(this.state,{filterCategory:{$set:e}}))},onFilterByComment:function(e){this.setState((0,i["default"])(this.state,{filterComment:{$set:e.target.value}}))},render:function(){var e=this,t=this.context.store.getState(),a=t.history,r=t.rootCategoryId,n=t.categoryList,o=this.state,i=o.filterDateFrom,l=o.filterDateTo,c=o.filterDateItem,d=o.filterCategory,m=o.filterComment,h={};a.forEach(function(e){var t=(0,u["default"])(e.date).month(),a=(0,u["default"])(e.date).year();a in h||(h[a]=[]),-1==h[a].indexOf(t)&&h[a].push(t)});var y=a.filter(function(e){return e.date>=i&&e.date<=l});return null!==d&&(y=y.filter(function(e){return e.categoryId===d})),""!==m&&(y=y.filter(function(e){return-1!=e.comment.indexOf(m)})),s["default"].createElement("div",{className:"history"},s["default"].createElement(f["default"],{visible:this.state.editingExpense,onCancel:this.onCancelEditingExpense},s["default"].createElement(p["default"],{expenseId:this.state.editingExpenseId,onSave:this.onExpenseSave,onCancel:this.onExpenseEditCancel})),s["default"].createElement("div",{className:"history__results"},0!=i&&l!=Number.MAX_VALUE?s["default"].createElement("div",{className:"history__current-filter"},s["default"].createElement("span",{className:"history__current-filter__title"},"Showing records:"),"  ",s["default"].createElement("span",null,(0,u["default"])(i).format("MMMM Do YYYY"))," — ",s["default"].createElement("span",null,(0,u["default"])(l).format("MMMM Do YYYY")),null!==d?s["default"].createElement("span",null,", in category „",n.filter(function(e){return e.id===d})[0].title,"“"):null,""!==m?s["default"].createElement("span",null,", with comment, containing „",m,"“"):null):null,s["default"].createElement(g["default"],{data:y,onEdit:this.onExpenseEdit,onDelete:this.onExpenseDelete})),s["default"].createElement("div",{className:"history__filters"},s["default"].createElement("div",{className:"history__title"},"Filter by date"),s["default"].createElement("div",{className:"history__year-month-filter"},b(h).sort(C.desc).map(function(t){return s["default"].createElement("div",{key:t,className:"history__year-month-filter__year-block"},c===t?s["default"].createElement("div",{className:"history__year-month-filter__item history__year-month-filter__item--active history__year-month-filter__year"},s["default"].createElement("span",null,t,":")):s["default"].createElement("div",{className:"history__year-month-filter__year history__year-month-filter__item"},s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(a){a.preventDefault(),e.onFilterByYear(t)}},t,":")),h[t].sort(C.desc).map(function(a){var r=(0,u["default"])().month(a).year(t);return c===t+"-"+a?s["default"].createElement("div",{key:a,className:"history__year-month-filter__item history__year-month-filter__month history__year-month-filter__item--active"},s["default"].createElement("span",null,r.format("MMMM"))):s["default"].createElement("div",{key:a,className:"history__year-month-filter__month history__year-month-filter__item"},s["default"].createElement("a",{href:"#",className:"pseudo",onClick:function(r){r.preventDefault(),e.onFilterByYearMonth(t,a)}},r.format("MMMM")))}))}))),s["default"].createElement("div",{className:"history__filters"},s["default"].createElement("div",{className:"history__title"},"Filter by category"),s["default"].createElement("div",{className:"history__category-filter"},s["default"].createElement(E["default"],{rootCategoryId:r,categoryList:n,allowEmpty:!0,value:this.state.filterCategory,onChange:this.onFilterByCategory})),s["default"].createElement("div",{className:"history__title"},"Filter by comment"),s["default"].createElement("div",{className:"history__comment-filter"},s["default"].createElement("input",{type:"text",value:this.state.filterComment,onChange:this.onFilterByComment}))))}});k.contextTypes={store:s["default"].PropTypes.object},a["default"]=k},{"./CategoryPicker":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/CategoryPicker.jsx","./ConfirmDialog":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ConfirmDialog.jsx","./EditExpense":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditExpense.jsx","./ExpenseList":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ExpenseList.jsx","./ModalContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx","./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/arrays.js","input-moment":"input-moment",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ModalContainer.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"ModalContainer",onCancel:function(e){e.target===this.refs.root&&this.props.onCancel&&this.props.onCancel(e)},onSave:function(e){13===e.keyCode&&this.props.onSave?this.props.onSave(e):27===e.keyCode&&this.props.onCancel&&this.props.onCancel(e)},render:function(){return this.props.visible!==!1?s["default"].createElement("div",{className:"modal-container",onClick:this.onCancel,ref:"root",onKeyUp:this.onSave},s["default"].createElement("div",{className:"modal-container__column"},s["default"].createElement("div",{className:"modal-container__column__cell"},this.props.children))):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/NumberInput.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("./numbers"),i=s["default"].createClass({displayName:"NumberInput",propTypes:{value:s["default"].PropTypes.shape({number:s["default"].PropTypes.number.isRequired,text:s["default"].PropTypes.string.isRequired})},getDefaultProps:function(){return{number:0,text:""}},onChange:function(e){var t=e.target.value;t=t.replace(/\s/g,""),t=t.replace(/,/g,"."),t=/^0[0-9]+/.test(t)?t.substring(1):t,(0,o.isNumber)(t)&&this.props.onChange({text:t,number:(0,o.getNumber)(t)})},getValue:function(){return(0,o.getNumber)(this.state.value)},setValue:function(e){(0,o.isNumber)(e)&&this.setState({value:e})},render:function(){return s["default"].createElement("input",{value:this.props.value.text,onChange:this.onChange})}});i.wrapState=function(e){e=parseFloat(e);var t=0===e?"":""+e;return{number:e,text:t}},i.unwrapState=function(e){return e.number},a["default"]=i},{"./numbers":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/numbers.js",react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Root.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("moment"),i=(r(o),e("react-addons-update")),l=r(i),c=e("./action-creators.js"),u=e("./NumberInput.jsx"),d=(r(u),e("./EditExpense.jsx")),f=r(d),m=e("./TabsContainer.jsx"),p=r(m),h=e("./WaitIndicator.jsx"),y=r(h),v=e("./History.jsx"),g=r(v),_=e("./Statistics.jsx"),E=r(_),C=e("./Settings"),x=r(C),b=e("./UserPanel"),k=r(b),j=s["default"].createClass({displayName:"Root",getInitialState:function(){return{activeTab:"Statistics"}},componentDidMount:function(){var e=this;this.unsubscribe=this.context.store.subscribe(function(){e.forceUpdate()})},componentUnmount:function(){this.unsubscribe()},onAdd:function(e){this.context.store.dispatch((0,c.newExpense)(e))},onAddCategory:function(e){this.context.store.dispatch((0,c.newCategory)(e))},onDelete:function(e){this.context.store.dispatch((0,c.deleteExpense)(e))},onSwitchTab:function(e){this.setState((0,l["default"])(this.state,{activeTab:{$set:e}}))},render:function(){var e=this.context.store,t=e.getState(),a=t.error,r=(t.history,t.categoryList,t.waiting);return"UNAUTHORIZED"===a?s["default"].createElement("div",{className:"unauthorized"},s["default"].createElement("div",{className:"unauthorized__caption"},"To use this application you should be authorized with Google Account"),s["default"].createElement("div",{className:"unauthorized__button"},s["default"].createElement("a",{href:"/login"},s["default"].createElement("img",{className:"unhovered",src:"images/google_signin_buttons/web/1x/btn_google_signin_light_normal_web.png"})))):s["default"].createElement("div",null,s["default"].createElement(p["default"],{titleList:["Main","History","Statistics","Settings"],active:this.state.activeTab,onSwitch:this.onSwitchTab},s["default"].createElement("div",null,s["default"].createElement(f["default"],{onAdd:this.onAdd})),s["default"].createElement("div",null,s["default"].createElement(g["default"],{onDelete:this.onDelete})),s["default"].createElement("div",null,s["default"].createElement(E["default"],null)),s["default"].createElement("div",null,s["default"].createElement(x["default"],null))),s["default"].createElement(y["default"],{waiting:r}),s["default"].createElement(k["default"],null))}});j.contextTypes={store:s["default"].PropTypes.object},a["default"]=j;
},{"./EditExpense.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditExpense.jsx","./History.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/History.jsx","./NumberInput.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/NumberInput.jsx","./Settings":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Settings.jsx","./Statistics.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Statistics.jsx","./TabsContainer.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/TabsContainer.jsx","./UserPanel":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/UserPanel.jsx","./WaitIndicator.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/WaitIndicator.jsx","./action-creators.js":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Settings.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=r(o),l=e("./TabsContainer"),c=r(l),u=e("./UserSettings"),d=r(u),f=e("./EditCategoryList"),m=r(f),p=e("./action-creators.js"),h=s["default"].createClass({displayName:"Settings",getInitialState:function(){return{active:"Categories"}},onNewCategory:function(e,t){this.context.store.dispatch((0,p.newCategory)({title:e,parentId:t}))},onRenameCategory:function(e,t){this.context.store.dispatch((0,p.editCategory)({id:e,title:t}))},onMoveCategory:function(e,t){this.context.store.dispatch((0,p.editCategory)({id:e,parentId:t}))},onDeleteCategory:function(e){this.context.store.dispatch((0,p.deleteCategory)({id:e}))},onSwitch:function(e){this.setState((0,i["default"])(this.state,{active:{$set:e}}))},render:function(){return s["default"].createElement("div",{className:"statistics"},s["default"].createElement(c["default"],{titleList:["Categories","User settings"],active:this.state.active,onSwitch:this.onSwitch},s["default"].createElement(m["default"],{onNewCategory:this.onNewCategory,onRenameCategory:this.onRenameCategory,onMoveCategory:this.onMoveCategory,onDeleteCategory:this.onDeleteCategory}),s["default"].createElement(d["default"],null)))}});h.contextTypes={store:s["default"].PropTypes.object},a["default"]=h},{"./EditCategoryList":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/EditCategoryList.jsx","./TabsContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/TabsContainer.jsx","./UserSettings":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/UserSettings.jsx","./action-creators.js":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Statistics.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=(r(o),e("moment")),l=(r(i),e("./SumTableStatistics")),c=r(l),u=s["default"].createClass({displayName:"Statistics",render:function(){return s["default"].createElement("div",{className:"statistics"},s["default"].createElement(c["default"],null))}});u.contextTypes={store:s["default"].PropTypes.object},a["default"]=u},{"./SumTableStatistics":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/SumTableStatistics.jsx",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/SumTableStatistics.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(a,"__esModule",{value:!0});var s=e("react"),o=r(s),i=e("react-addons-update"),l=r(i),c=e("moment"),u=r(c),d=e("./TabsContainer"),f=r(d),m=e("./money"),p=r(m),h=e("./arrays"),y=p["default"].format(),v=Object,g=v.keys,_=o["default"].createClass({displayName:"SumTableStatistics",getInitialState:function(){var e=Object.keys(this.getYearMonthCategoryExpenseMap()).map(function(e){return parseInt(e)}).sort(h.desc);return{activeYear:e[0],showChild:!1,showAtRoot:!1,showDif:!1}},getYearMonthCategoryExpenseMap:function(){var e=this.context.store.getState(),t=e.history,a=(e.categoryList,{});return t.forEach(function(e){var t=(0,u["default"])(e.date).month(),r=(0,u["default"])(e.date).year(),n=e.categoryId;r in a||(a[r]=[]),t in a[r]||(a[r][t]=[]),n in a[r][t]||(a[r][t][n]=[]),a[r][t][n].push(e)}),a},onChangeChild:function(e){this.setState((0,l["default"])(this.state,{showChild:{$set:!this.state.showChild}}))},onChangeShotAtRoot:function(e){this.setState((0,l["default"])(this.state,{showAtRoot:{$set:!this.state.showAtRoot}}))},onChangeShotDif:function(e){this.setState((0,l["default"])(this.state,{showDif:{$set:!this.state.showDif}}))},render:function(){function e(t,a,r){var n=c.filter(function(e){return e.parentId===a.id}),s=n.map(function(a){return e(t,a,r)}).reduce(function(e,t){return e+t},0),o=n.map(function(e){return t[e.id][r]}).reduce(function(e,t){return e+t},0);return o+s}function t(e){var t={};return Object.keys(e).forEach(function(a){Object.keys(e[a]).forEach(function(r){t[r]||(t[r]=0),t[r]+=e[a][r]})}),o["default"].createElement("tr",{key:"total"},o["default"].createElement("td",{className:"sum-table-statistics__year__total__title"},"Total:"),Object.keys(t).sort(m).map(function(e){var a=t[e],r=t[e-1],n=r?a-r:null;return o["default"].createElement("td",{key:e,className:"sum-table-statistics__year__total__value"},y(a),h(n))}))}function a(e){var a=[],r=c.filter(function(e){return e.parentId===d});return r.forEach(function(t){a.push.apply(a,n(v(e,t,0)))}),a.push(t(e)),a}function r(e){var t={};return c.forEach(function(a){t[a.id]={},Object.keys(e).sort(m).map(function(r){var n=e[r],s=n[a.id]||[],o=s.reduce(function(e,t){return e+t.amount},0);t[a.id][r]=o})}),t}var s=this,i=this.context.store.getState(),c=i.categoryList,d=i.rootCategoryId,m=function(e,t){return e-t},p=this.getYearMonthCategoryExpenseMap(),h=function(e){return s.state.showDif?e?e>0?o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--plus"},"+"+y(e)):o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--minus"},"-"+y(-e)):o["default"].createElement("div",{className:"sum-table-statistics__year__value__dif sum-table-statistics__year__value__dif--zero"},"0"):o["default"].createElement("div",null)},v=function _(t,a,r){var i=[],l=t[a.id];return i.push(o["default"].createElement("tr",{key:a.id},o["default"].createElement("td",{style:{paddingLeft:20*r+"px"},className:"sum-table-statistics__year__category"},a.title),g(l).sort(m).map(function(r){var n=l[r]+e(t,a,r),s=null;if(l[r-1]){var i=l[r-1]+e(t,a,r-1);s=i?n-i:null}return o["default"].createElement("td",{key:a.id+"-"+r,className:"sum-table-statistics__year__value"},y(n),h(s))}))),s.state.showChild&&!function(){var e=[];c.filter(function(e){return e.parentId===a.id}).forEach(function(a){e.push.apply(e,n(_(t,a,r+1)))}),s.state.showAtRoot&&e.unshift(o["default"].createElement("tr",{key:a.id+"-self"},o["default"].createElement("td",{style:{paddingLeft:20*(r+1)+"px"},className:"sum-table-statistics__year__category"},"(at root)"),g(l).sort(m).map(function(e){var t=l[e],r=l[e-1],n=r?t-r:null;return o["default"].createElement("td",{key:a.id+"-"+e,className:"sum-table-statistics__year__value"},y(t),h(n))}))),i.push.apply(i,e)}(),i};return o["default"].createElement(f["default"],{className:"sum-table-statistics",titleList:Object.keys(p).sort(m),active:(this.state.activeYear||"").toString(),onSwitch:function(e){s.setState((0,l["default"])(s.state,{activeYear:{$set:e}}))}},Object.keys(p).sort(m).map(function(e){var t=r(p[e]);return o["default"].createElement("div",{key:e},o["default"].createElement("div",null,o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",checked:s.state.showChild,onChange:s.onChangeChild})," show child categories"),o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",disabled:!s.state.showChild,checked:s.state.showAtRoot,onChange:s.onChangeShotAtRoot})," show 'at root'"),o["default"].createElement("label",null,o["default"].createElement("input",{type:"checkbox",checked:s.state.showDif,onChange:s.onChangeShotDif})," show difference")),o["default"].createElement("table",{className:"sum-table-statistics__year"},o["default"].createElement("tbody",null,o["default"].createElement("tr",null,o["default"].createElement("td",null),g(p[e]).sort(m).map(function(t){var a=(0,u["default"])().year(parseInt(e)).month(parseInt(t));return o["default"].createElement("td",{key:e+"-"+t,className:"sum-table-statistics__year__month"},a.format("MMMM"))})),a(t))))}))}});_.contextTypes={store:o["default"].PropTypes.object},a["default"]=_},{"./TabsContainer":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/TabsContainer.jsx","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/arrays.js","./money":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/money.js",moment:"moment",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/TabsContainer.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"TabsContainer",propTypes:{titleList:s["default"].PropTypes.arrayOf(s["default"].PropTypes.string),active:s["default"].PropTypes.string,checkTitleAndChildrenCount:function(e){if(e.titleList.length!==s["default"].Children.count(e.children))throw new Error("Length of titleList property and children count should be equal")}},onClick:function(e){var t=this;return function(a){a.preventDefault(),t.props.onSwitch(e)}},render:function(){var e=this,t=this.props.titleList.indexOf(this.props.active),a="tabs-container"+(this.props.className?" "+this.props.className:"");return s["default"].createElement("div",{className:a},s["default"].createElement("div",{className:"tabs-container__labels"},this.props.titleList.map(function(t){return t===e.props.active?s["default"].createElement("span",{key:t,className:"tabs-container__labels__label tabs-container__labels__label--active"},t):s["default"].createElement("span",{key:t,className:"tabs-container__labels__label"},s["default"].createElement("a",{href:"#",className:"pseudo",onClick:e.onClick(t)},t))})),s["default"].createElement("div",{className:"tabs-container__content"},s["default"].Children.map(this.props.children,function(e,a){return a===t?e:null})))}});o.contextTypes={store:s["default"].PropTypes.object},a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/UserPanel.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"UserPanel",render:function(){return s["default"].createElement("div",{className:"user-panel"},s["default"].createElement("a",{href:"/logout"},"Logout"))}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/UserSettings.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=e("react-addons-update"),i=(r(o),e("./action-creators")),l=s["default"].createClass({displayName:"UserSettings",onChangeCurrency:function(e){this.context.store.dispatch((0,i.setCurrency)({currency:e.target.value}))},render:function(){var e=this.context.store.getState().userSettings.currency;return s["default"].createElement("table",null,s["default"].createElement("tbody",null,s["default"].createElement("tr",null,s["default"].createElement("td",null,s["default"].createElement("label",null,"Currency:")),s["default"].createElement("td",null,s["default"].createElement("select",{value:e,onChange:this.onChangeCurrency},s["default"].createElement("option",{value:"USD"},"U.S. dollars"),s["default"].createElement("option",{value:"EUR"},"Euro"),s["default"].createElement("option",{value:"RUR"},"Russian rubles"))))))}});l.contextTypes={store:s["default"].PropTypes.object},a["default"]=l},{"./action-creators":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js",react:"react","react-addons-update":"react-addons-update"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/WaitIndicator.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),s=r(n),o=s["default"].createClass({displayName:"WaitIndicator",render:function(){return this.props.waiting?s["default"].createElement("div",{className:"wait-indicator"},"Please, wait..."):null}});a["default"]=o},{react:"react"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/action-creators.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){t({type:"WAIT"}),o["default"].post(i,e(null)).then(function(a){t({type:"STOP_WAIT"}),t(e(a))},function(a){t({type:"STOP_WAIT"}),t(e(a))})}}Object.defineProperty(a,"__esModule",{value:!0}),a.setCurrency=a.deleteCategory=a.editCategory=a.newCategory=a.deleteExpense=a.editExpense=a.newExpense=void 0;var s=e("./ajax"),o=r(s),i="/dispatch";a.newExpense=function(e){var t=e.amount,a=e.categoryId,r=e.comment,s=e.date;return n(function(e){return{type:"NEW_EXPENSE",amount:t,categoryId:a,comment:r,id:e,date:s}})},a.editExpense=function(e){var t=e.id,a=e.amount,r=e.categoryId,s=e.comment,o=e.date;return n(function(){return{type:"EDIT_EXPENSE",id:t,amount:a,categoryId:r,comment:s,date:o}})},a.deleteExpense=function(e){return n(function(t){return{type:"DELETE_EXPENSE",id:e}})},a.newCategory=function(e){var t=e.title,a=e.parentId;return n(function(e){return{type:"NEW_CATEGORY",id:e,title:t,parentId:a}})},a.editCategory=function(e){var t=e.id,a=e.title,r=void 0===a?null:a,s=e.parentId,o=void 0===s?null:s;return n(function(e){return{type:"EDIT_CATEGORY",id:t,title:r,parentId:o}})},a.deleteCategory=function(e){var t=e.id;return n(function(e){return{type:"DELETE_CATEGORY",id:t}})},a.setCurrency=function(e){var t=e.currency;return n(function(e){return{type:"SET_CURRENCY",currency:t}})}},{"./ajax":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ajax.js"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ajax.js":[function(e,t,a){"use strict";var r=e("es6-promise");t.exports.get=function(e){var t=void 0;return new r.Promise(function(a,r){t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE)if(200==t.status)if(t.responseText)try{a(JSON.parse(t.responseText))}catch(e){console.error("Response text is not null, but it's not a valid JSON: "+t.responseText),a(null)}else a(null);else r({code:t.status,responseText:t.responseText})},t.open("GET",e,!0),t.send()})},t.exports.post=function(e,t){return new r.Promise(function(a,r){var n=void 0;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE)if(200==n.status)if(n.responseText)try{a(JSON.parse(n.responseText))}catch(e){console.error("Response text is not null, but it's not a valid JSON: "+n.responseText),a(null)}else a(null);else r({code:n.status,responseText:n.responseText})},n.open("POST",e,!0),n.send(JSON.stringify(t))})}},{"es6-promise":"es6-promise"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/arrays.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.asc=function(e,t){return e>t?1:t>e?-1:0},a.desc=function(e,t){return t>e?1:e>t?-1:0},a.find=function(e,t){return e.filter(t)[0]}},{}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/main.jsx":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var s=e("es6-promise"),o=e("react"),i=r(o),l=e("react-dom"),c=r(l),u=e("react-addons-update"),d=r(u),f=e("redux"),m=e("redux-logger"),p=r(m),h=e("redux-thunk"),y=r(h),v=e("react-redux"),g=e("moment"),_=r(g),E=e("./ajax"),C=r(E),x=e("./Root.jsx"),b=r(x),k=(e("./arrays"),"/dispatch");C["default"].get(k).then(function(e){return e},function(e){return console.error(e),console.error("Failed to load state, use default state"),s.Promise.resolve({error:"UNAUTHORIZED"})}).then(function(e){var t=function(){var t=arguments.length<=0||void 0===arguments[0]?e:arguments[0],a=arguments[1],r=a.type;a.status;switch(r){case"WAIT":return(0,d["default"])(t,{waiting:{$set:!0}});case"STOP_WAIT":return(0,d["default"])(t,{waiting:{$set:!1}});case"NEW_EXPENSE":var s=function(){var e=parseFloat(a.amount),r=parseInt(a.categoryId),n=a.comment,s=a.id,o=(0,_["default"])(a.date).valueOf(),i=!isNaN(e)&&t.categoryList.filter(function(e){return e.id===r}).length>0;return i?{v:(0,d["default"])(t,{history:{$push:[{id:s,amount:e,categoryId:r,comment:n,date:o}]}})}:void console.error("Invalid action",a)}();if("object"===("undefined"==typeof s?"undefined":n(s)))return s.v;break;case"EDIT_EXPENSE":var o=function(){var e=a.id,r=parseFloat(a.amount),n=parseInt(a.categoryId),s=a.comment,o=(0,_["default"])(a.date).valueOf(),i=t.history.map(function(t){return t.id===e?{id:e,amount:r,categoryId:n,comment:s,date:o}:t});return{v:(0,d["default"])(t,{history:{$set:i}})}}();if("object"===("undefined"==typeof o?"undefined":n(o)))return o.v;break;case"DELETE_EXPENSE":return(0,d["default"])(t,{history:{$set:t.history.filter(function(e){return e.id!==a.id})}});case"NEW_CATEGORY":var i=function(){var e=parseFloat(a.id),r=a.title,n=a.parentId,s={id:e,title:r,parentId:n,childIdList:[]},o=t.categoryList.map(function(t){return t.id===n?(0,d["default"])(t,{childIdList:{$push:[e]}}):t});return o=o.concat([s]),{v:(0,d["default"])(t,{categoryList:{$set:o}})}}();if("object"===("undefined"==typeof i?"undefined":n(i)))return i.v;break;case"EDIT_CATEGORY":var l=function(){var e=parseFloat(a.id),r=a.title,n=a.parentId,s=t.categoryList;return null!==r&&(s=s.map(function(t){return t.id===e?(0,d["default"])(t,{title:{$set:r}}):t})),null!==n&&!function(){var a=t.categoryList.filter(function(t){return t.id==e})[0],r=a.parentId;r!==n&&(s=s.map(function(t){if(t.id===e)return(0,d["default"])(t,{parentId:{$set:n}});if(t.id===r){var a=t.childIdList.filter(function(t){return t!==e});return(0,d["default"])(t,{childIdList:{$set:a}})}if(t.id===n){var a=t.childIdList.concat([e]);return(0,d["default"])(t,{childIdList:{$set:a}})}return t}))}(),{v:(0,d["default"])(t,{categoryList:{$set:s}})}}();if("object"===("undefined"==typeof l?"undefined":n(l)))return l.v;break;case"DELETE_CATEGORY":var c=function(){var e=a.id,r=t.categoryList.filter(function(t){return t.id==e})[0],n=r.parentId,s=t.categoryList.filter(function(t){return t.id!==e}).map(function(e){return e.id===n?(0,d["default"])(e,{childIdList:{$set:e.childIdList.filter(function(e){return e!==a.id})}}):e});return{v:(0,d["default"])(t,{categoryList:{$set:s}})}}();if("object"===("undefined"==typeof c?"undefined":n(c)))return c.v;break;case"SET_CURRENCY":var u=a.currency;return(0,d["default"])(t,{userSettings:{currency:{$set:u}}});default:console.warn("Unhandled action",a)}return t},a=(0,f.applyMiddleware)(y["default"],(0,p["default"])())(f.createStore)(t);c["default"].render(i["default"].createElement(v.Provider,{store:a},i["default"].createElement(b["default"],null)),document.getElementById("react"))},function(e){console.error(e)})["catch"](function(e){console.error(e)})},{"./Root.jsx":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/Root.jsx","./ajax":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/ajax.js","./arrays":"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/arrays.js","es6-promise":"es6-promise",moment:"moment",react:"react","react-addons-update":"react-addons-update","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/money.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={format:function(e){return function(t){e=e||{};for(var a=e.groupDelim||" ",r=e.decimalDelim||".",n=e.currency||"",s=e.currencyBefore||!1,o="",i=parseInt(t/100),l=parseInt(t%100);i>=1e3;){var c=i%1e3;o=c+o,100>c&&(o="0"+o),10>c&&(o="0"+o),o=a+o,i=parseInt(i/1e3)}return o=i+o,o+=r,10>l&&(o+="0"),o+=l,s?o=n+o:o+=n,o}},settings:{byCurrency:{USD:{currency:"$",currencyBefore:!0},EUR:{currency:" "+String.fromCharCode(parseInt("8364"))},RUR:{currency:" "+String.fromCharCode(parseInt("8381"))}}}}},{}],"/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/numbers.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.isNumber=function(e){return/^[0-9]*([,.][0-9]*)?$/.test(e)?!0:void 0},a.getNumber=function(e){return""===e||"."===e||","===e?0:parseFloat(e)}},{}]},{},["/Users/koluch/Dropbox/dev/js/moneytrack/src/scripts/main.jsx"]);